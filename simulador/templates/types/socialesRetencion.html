{% load static %}


{% block styles %}
    <link href="{% static "css/deuda.css" %}" rel="stylesheet">
{% endblock styles %}

    <h1 class="title-types">Lineas Sociales y Retencion</h1>
    <p class="complement">Estas lineas sociales y de retencion tienen en cuenta tus años de antiguedad y el monto de tus aportes.</p>

    <div id="form-values" class="form-values">
        {% csrf_token %}
        <select id="typecredit1" name="typecredit1" required>
            <option value="">-- Seleccione su rango de años de antiguedad --</option>
            {% for type in socialesRetencion %}
                <option value="{{type.name}}">{{type.name}}</option>
            {% endfor %}
        
        </select>

        <div class="wave-group aportes">
            <input required id="aportes" type="text" class="input" name="aportes" oninput="handleChange('aportes')">
            <span class="bar"></span>
            <label for="aportes" class="label">
                <span class="label-char" style="--index: 0">A</span>
                <span class="label-char" style="--index: 1">p</span>
                <span class="label-char" style="--index: 2">o</span>
                <span class="label-char" style="--index: 3">r</span>
                <span class="label-char" style="--index: 4">t</span>
                <span class="label-char" style="--index: 5">e</span>
                <span class="label-char" style="--index: 6">s</span>
            </label>
        </div>


        <div class="three">
            <h2 class="title-2">3. Ingresa el monto de aportes y plazo de tu credito.</h2>
            
            <div class="personal-datas">
                <div class="wave-group">
                    <input required id="monto1" type="text" class="input" name="monto1" oninput="handleChange('monto1')">
                    <span class="bar"></span>
                    <label for="monto" class="label">
                        <span class="label-char" style="--index: 0">M</span>
                        <span class="label-char" style="--index: 1">o</span>
                        <span class="label-char" style="--index: 2">n</span>
                        <span class="label-char" style="--index: 3">t</span>
                        <span class="label-char" style="--index: 4">o</span>
                    </label>
                </div>
                <div class="wave-group">
                    <input required id="cuotas1" type="number" class="input" name="cuotas1">
                    <span class="bar"></span>
                    <label for="cuotas" class="label">
                        <span class="label-char" style="--index: 0">C</span>
                        <span class="label-char" style="--index: 1">u</span>
                        <span class="label-char" style="--index: 2">o</span>
                        <span class="label-char" style="--index: 3">t</span>
                        <span class="label-char" style="--index: 4">a</span>
                        <span class="label-char" style="--index: 4">s</span>
                    </label>
                </div>
            </div>
        </div>
    </div>

    <script>
        function handleChange(idName) {
            var inputElement = document.getElementById(idName);
            inputElement.value = inputElement.value.replace(/\D/g, ''); // Elimina caracteres no numéricos
            var inputValue = inputElement.value.replace('.', '').split("").reverse(); // Reversa el valor para facilitar la inserción de puntos
            var newValue = '';
            for (var i = 0; i < inputValue.length; i++) {
                if (i % 3 == 0 && i!= 0) { // Agrega un punto cada tres dígitos, excepto al inicio
                    newValue += '.';
                }
                newValue += inputValue[i];
            }
            inputElement.value = newValue.split("").reverse().join(""); // Revierte el valor y lo establece en el input
        }
      
      </script>